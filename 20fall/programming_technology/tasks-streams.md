---
type: tasks
---

### Потоки (Streams)

Следующая функция возвращает бесконечный поток случайных целых чисел от 0 до max - 1. Попробуйте понять, как она работает.

        public static IntStream randomStream(int max) {
            Random r = new Random();
            return IntStream.generate(() -> r.nextInt(max));
        }
        
Следующая функция возвращает бесконечный поток натуральных чисел 1, 2, 3 и т.д. Попробуйте понять, как она работает

        public static IntStream integersStream() {
            return IntStream.iterate(1, x -> x + 1);
        }
        
Используйте метод Scanner.tokens() для получения потока слов из файла.

Во всех следующих задачах используйте потоки. Создавайте их сами из коллекций, или пользуйтесь приведенными выше функциями.

1. Дано n. Посчитайте сумму
    1. чисел от 1 до n
    1. квадратов чисел от 1 до n
    1. кубов чисел от 1 до n
    1. обратных чисел от 1 до n
1. Дан список чисел. Верните новый список, в котором удалены все четные числа.
1. Дан файл. Посчитайте среднюю длину слов в этом файле. А еще максимальные и минимальные длины слов. Используйте подходящий Collector.
    1. Найдите самое длинное слово в файле. Получится сделать это за один проход по потоку?
1. Бросьте монетку 100 раз, сколько раз выпал орёл, а сколько решка?
1. Посчитайте количество слов в потоке.
1. Сколько в тексте слов, начинающихся с заглавной буквы?
1. Посчитайте количество слов в потоке без учета [стоп-слов](https://raw.githubusercontent.com/stopwords-iso/stopwords-ru/master/stopwords-ru.txt). Приводите слова к нижнему регистру для сравнения со стоп словами.

    Подсказка: создайте Set<String> для списка стоп-слов.
1. Какая средняя длина слова в вашем тексте?
1. Посчитайте сразу и среднюю длину слова, и максимальная длину, и минимальную.
   Подсказка: для вычисления сразу всех статистик есть соответствующий `Collector`.
1. Каких слов больше, с четной длиной или с нечетной длиной?
   Попробуйте сделать только один проход по потоку для получения ответа.
1. Распечатайте «табличку», сколько раз встретилась каждая длина слова.
   Например, слов длины 1: 10 штук, слов длины 2: 40 штук и т.п.
1. Аналогично предыдущей задаче, но должно быть две таблички.
   С учетом одинаковых слов или без учета одинаковых слов.
   Т.е. Если некоторое слово встретилось дважды, его нужно считать дваждый в
   первой таблице, и один раз во второй таблице.
1. Посчитайте частоты всех слов файла. Верните Map<String, Integer>,
    сопоставляющий каждому слову количество раз, которое оно встретилось в файле.
    Приводите слова к нижнему регистру.
1. Получите частоты всех слов в файле с помощью предыдущей задачи и выведите слова
   в порядке убывания частот. Подсказка. У `Map` есть метод `entrySet`
   который возвращает множество (`Set`) записей, содержащих пару из ключа и значения.
   С этим множеством тоже можно работать с помощью потоков, и сортировать его.
1. Пусть S = количество стоп-слов. Если взять первые S самых частотных слов
   вашего текста, сколько совпадений будет со словами стоп-листа?
1. Сложно. Определите имена в тексте. Имена — это слова, начинающиеся с
   заглавной буквы, перед которыми не было конца предложения, т.е. точки,
   восклицательного знака, вопросительного знака.
1. Сложно. Создайте класс `Context`. Он содержит `String` word — слово и
`Set<String>` — несколько соседних слов, пять до и пять после. (5 — это константа, которую можно менять при создании класса). Превратите поток слов в поток их контекстов.


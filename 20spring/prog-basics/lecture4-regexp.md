# Регулярные выражения

Можно тренироваться в придумывании и использовании регулярных
выражений на сайте [regexr.com](https://regexr.com/).

Регулярное выражение - это описание множества слов, где слова - это
последовательности символов, т.е. фактически регулярное выражение
описывает множество значений типа String.

Примеры:
1. Все строки длины 2. L = {"ab", "xy", ...}, "abc" - нет.
2. Все строки, начинающиеся и заканчивающиеся на букву 'a'.
L = {"asdfga", "auuuua", ...}, "abc" - нет
3. Все строки, которые похожи на email:
L = {"abc@yandex.ru", "iposov@gmail.com", "ilya@usa.gov", ...}
"asdfasd@@@@fkasdfas" - нет.
4. Даты, имена, числа и т.п.

Зачем. Можно
1. Проверить, соответствует ли строка регулярному выражению.
2. Искать вхождения внутри текста. Например, искать email
внутри длинного текста.
3. Искать и заменять. Находить имена внутри текста, заменять
их на ***. (анонимизиация)

Примеры
1. `ss`
2. `as|es`
3. `(a|e)s` слова as, es
1. `(a|e)(s|t)` слова as, es, at, et
1. `0|1|2|3|4|5|6|7|8|9` одна цифра
1. `\d` аналог предыдущего
1. `s*` несколько s подряд (возможно 0)
1. `(a|e|i|o|u|y)*` несколько гласных подряд
1. `[aeiouy]*` аналогично предыдущему, гласные. `[]` -
сопоставляется с одним символом, одним из тех, что перечислены
внутри. 
1. `[a-zA-Z]` т.е. одна английская буква.
1. `[a-zA-Z]*` несколько английских букв подряд.
1. `[a-z.-]*@[a-z.-]*.[a-z][a-z]([a-z]|)` email, домен верхнего
уровня две или три буквы ... почти правильно
1. `[a-z.-]+@[a-z.-]+\.[a-z]{2,3}`
    
    `+` означает повторение 1 раз и более. `*` означает 0 раз
    и более.
    
    `.` означает любой символ (!), (* иногда кроме перевода строки)
    `\.` если поставить перед точкой обратный слеш, она станет
    работать как обычный символ.
    
    `{a,b}` это значит повторить от a до b раз.
    
    [Другие возможности](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/regex/Pattern.html) по ссылке
    
1. `\s` пробельный символ.

## Группы

1. `([a-z])(\d)` буква потом цифра. Первая группа - буква,
вторая группа - цифра.
1. `([a-zA-Z]+)-([a-zA-Z]+)`. Слова через дефис. Первая группа
это первая половина слова. Вторая группа - вторая половина.

## Флаги
Можно настраивать процесс сопоставления с регулярным выражением.

1. Ignore case - игнорировать ли регистр при поиске
1. Multiline (. - любой символ, включая перевод строки, ^ - начало
 ввода $ - конец ввода). При отключенном multiline (. - любой
 символ кроме перевода строки, ^ - начало строки, $ - конец строки)
1. Unicode - поддержка unicode

# Использование в Java

Хотим записать регулярное выражение
`\d\.\d\d` - цифра точка и две цифры

`String s = "\d\.\d\d";` - такую строку нельзя создать в Java.
`\d`- нет такого символа в Java. Есть, конечно `\n`, но это не то.
 
 Надо:
 `String s = "\\d\\.\\d\\d"`, здесь Java воспримет `\\` как один
 символ `\`.
 Ср. Python: `s = r"\d\.\d\d"`
 
 ## Методы, принимающие регулярные выражения
 
```
//проверка соответствия строки выражению
"abc".matches("[a-z]+"); // true
//замена по выражению, указываем что на что заменить
"abc3iii6".replaceAll("\\d", "++") // "abc++iii++"
//замена с группами, $1 - это первая группа
"abc3iii6".replaceAll("([a-z])(\\d)", "$2!$1") // "ab3!сii6!i"

//replaceFirst заменит только первое вхождение

//split, аналогично python разделяет, по рег. выражению:
//здесь: несколько пробельных символов - это разделитель
"abc    asdf 234".split("\\s+") // получим массив String[]
                                // "abc", "asdf", "234"
```